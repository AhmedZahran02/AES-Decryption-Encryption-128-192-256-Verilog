module AES#(parameter Nb = 4,
parameter Nr = 1,parameter Nk = 4)
(
input [127:0]in,
input [(Nk * 32 - 1):0] key,
output [127:0]out
    );
    //test input 3243f6a8885a308d313198a2e0370734
    wire [127:0] state [10:0];
    assign state[0] = in;
genvar i;
generate
    for(i = 0;i <= 3 ;i = i+1)begin
        subBytes(state[i],state[i+1]);
        Shift_Rows m1(state[i+2],state[i+1]);//reversed inputs
        MixColumns m2(state[i+2],state[i+3]);

    end
endgenerate 
assign out = state[4];
endmodule